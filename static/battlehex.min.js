function e(){return!!document.createElementNS&&!!document.createElementNS(K,"svg").createSVGRect}function l(e,l){return 160+10.2433112276*(l-e)}function n(e,l){return 62.0967741935+17.7419354839*(l-e)+35.4838709677*(e-1)}function t(e,l){let n=!0;if(ne.length!=W.length+2)n=!1;else for(let e=0;e<W.length+2||!n;e++)ne[e].length!=W.length+2&&(n=!1);if(n){if(l==H){if(document.getElementById(e).src!=D+"/back.svg"&&(null==X||null!=Y||null==Y&&e.substr(0,1).toLowerCase()!=X.substr(0,1).toLowerCase())){if(null==X)X=e;else if(null==Y){let l=h(X,e);l.row&&l.column&&null==ne[l.row][l.column]&&(Y=e)}else{let l=h(X,Y);d(l.row,l.column,"makeCellMove("+l.row+","+l.column+",player);"),X=e,Y=null}f()}null!=X&&null!=Y?(document.getElementById("randomizeFlipInput").checked&&(r(H),document.getElementById("playerFlipCardImg").src=document.getElementById(X).src,document.getElementById("playerPlayCardImg").src=document.getElementById(Y).src),document.getElementById("sendMove").disabled=!1):document.getElementById("sendMove").disabled=!0}else null==Z?Z=e:null==$?$=e:(Z=e,$=null);(null!=Y||null!=X)&&(document.getElementById("opponentPlayCardImg").src=D+"/back.svg",document.getElementById("opponentFlipCardImg").src=D+"/back.svg")}}function o(e,l,n){i(H,ne)||i(J,ne)||(n==H?(null==Y&&null!=X&&("r"==le.substr(0,1)?t("b"+W[l-1],n):"c"==le.substr(0,1)&&t("r"+W[e-1],n)),t("r"+W[e-1],n),t("b"+W[l-1],n)):(t("r"+W[e-1],n),t("b"+W[l-1],n),r(n)))}function r(e){if(e==H){if(null!=X&&null!=Y){if(Math.random()<.5){var l=X;X=Y,Y=l}document.getElementById("playerFlipCardImg").src=D+"/"+_["b,r".split(",").indexOf(X.substr(0,1))]+X.substr(1)+".svg",document.getElementById("playerPlayCardImg").src=D+"/"+_["b,r".split(",").indexOf(Y.substr(0,1))]+Y.substr(1)+".svg"}}else if(Math.random()<.5){l=Z;Z=$,$=l}}function u(){let e=h(X,Y),l=h(Z,$);if(null!=X&&null!=Y&&null!=Z&&null!=$)document.getElementById("opponentFlipCardImg").src=D+"/"+ee["b,r".split(",").indexOf(Z.substr(0,1))]+Z.substr(1)+".svg",document.getElementById("opponentPlayCardImg").src=D+"/"+ee["b,r".split(",").indexOf($.substr(0,1))]+$.substr(1)+".svg",e.row==l.row&&e.column==l.column?m():(1==H?(ne[e.row][e.column]=H,g(e.row,e.column,"red"),ne[l.row][l.column]=J,g(l.row,l.column,"black")):(ne[e.row][e.column]=H,g(e.row,e.column,"black"),ne[l.row][l.column]=J,g(l.row,l.column,"red")),X=null,Y=null,Z=null,$=null,i(H,ne)||i(J,ne)||(document.getElementById("loader").classList.add("loaderanimation"),setTimeout((function(){l=B(J,ne),o(l.row,l.column,J),u(),document.getElementById("loader").classList.remove("loaderanimation")}),ue))),i(H,ne)?alert("Player wins!"):i(J,ne)&&alert("Computer wins!");else{let n=0,r=0;for(let e=1;e<=W.length;e++)for(let l=1;l<=W.length;l++)ne[e][l]==H?n++:ne[e][l]==J&&r++;n<r&&null!=X&&null!=Y&&("r"==Z.substr(0,1)?(t("r"+W[e.row-1],H),t("b"+W[e.column-1],H)):(t("b"+W[e.column-1],H),t("r"+W[e.row-1],H)),1==H?(ne[e.row][e.column]=H,g(e.row,e.column,"red")):(ne[e.row][e.column]=H,g(e.row,e.column,"black")),X=null,Y=null,Z=null,$=null,document.getElementById("loader").classList.add("loaderanimation"),setTimeout((function(){l=B(J,ne),o(l.row,l.column,J),u(),document.getElementById("loader").classList.remove("loaderanimation")}),ue))}c()}function c(){for(let e=1;e<=W.length;e++){let l=!1;for(let n=1;n<=W.length;n++)null==ne[e][n]&&(l=!0);l||(document.getElementById("r"+W[e-1]).src=D+"/back.svg",document.getElementById("r"+W[e-1]).onclick=""),l=!1;for(let n=1;n<=W.length;n++)null==ne[n][e]&&(l=!0);l||(document.getElementById("b"+W[e-1]).src=D+"/back.svg",document.getElementById("b"+W[e-1]).onclick="")}}function s(){for(let e=0;e<W.length;e++){let l=!1;for(let n=1;n<=W.length;n++)null==ne[e+1][n]&&(l=!0);l?(document.getElementById("r"+W[e]).src=D+"/"+_.join(",").substr("b,r".indexOf("r"),1)+W[e]+".svg",document.getElementById("r"+W[e]).setAttribute("onclick","makeCardMove('r"+W[e]+"', player);")):(document.getElementById("r"+W[e]).src=D+"/back.svg",document.getElementById("r"+W[e]).setAttribute("onclick","")),l=!1;for(let n=1;n<=W.length;n++)null==ne[n][e+1]&&(l=!0);l?(document.getElementById("b"+W[e]).src=D+"/"+_.join(",").substr("b,r".indexOf("b"),1)+W[e]+".svg",document.getElementById("b"+W[e]).setAttribute("onclick","makeCardMove('b"+W[e]+"', player);")):(document.getElementById("b"+W[e]).src=D+"/back.svg",document.getElementById("b"+W[e]).setAttribute("onclick",""))}}function m(){if(null!=X&&null!=Y&&null!=Z&&null!=$){let e=h(X,Y);if(X==Z)if(1==H){let l={};alert('Both move to "'+X+'", "'+Y+'." Player wins move.'),ne[e.row][e.column]=H,g(e.row,e.column,"red"),i(H,ne)||(document.getElementById("loader").classList.add("loaderanimation"),setTimeout((function(){l=B(J,ne),ne[l.row][l.column]=J,g(l.row,l.column,"black"),"r"==X.substr(0,1)?(t("r"+W[l.row-1],J),t("b"+W[l.column-1],J)):(t("b"+W[l.column-1],J),t("r"+W[l.row-1],J)),X=null,Y=null,document.getElementById("opponentFlipCardImg").src=D+"/"+ee["b,r".split(",").indexOf(Z.substr(0,1))]+Z.substr(1)+".svg",document.getElementById("opponentPlayCardImg").src=D+"/"+ee["b,r".split(",").indexOf($.substr(0,1))]+$.substr(1)+".svg",l=B(H,ne),o(l.row,l.column,J),document.getElementById("loader").classList.remove("loaderanimation")}),ue))}else{alert('Both move to "'+Z+'", "'+$+'." Computer wins move.');let e=h(Z,$);X=null,Y=null,ne[e.row][e.column]=J,g(e.row,e.column,"red")}else if(2==H){alert('Both move to "'+X+'", "'+Y+'." Player wins move.');let l={};ne[e.row][e.column]=H,g(e.row,e.column,"black"),i(H,ne)||(document.getElementById("loader").classList.add("loaderanimation"),setTimeout((function(){l=B(J,ne),ne[l.row][l.column]=J,g(l.row,l.column,"red"),"r"==X.substr(0,1)?(t("r"+W[l.row-1],J),t("b"+W[l.column-1],J)):(t("b"+W[l.column-1],J),t("r"+W[l.row-1],J)),X=null,Y=null,document.getElementById("opponentFlipCardImg").src=D+"/"+ee["b,r".split(",").indexOf(Z.substr(0,1))]+Z.substr(1)+".svg",document.getElementById("opponentPlayCardImg").src=D+"/"+ee["b,r".split(",").indexOf($.substr(0,1))]+$.substr(1)+".svg",l=B(H,ne),o(l.row,l.column,J),document.getElementById("loader").classList.remove("loaderanimation")}),ue))}else{alert('Both move to "'+Z+'", "'+$+'." Computer wins move.');let e=h(Z,$);X=null,Y=null,ne[e.row][e.column]=J,g(e.row,e.column,"black")}}}function i(e,l){let n=[function(){return u<W.length+1&&[0,3,e].indexOf(l[r][u+1])>=0},function(){return r<W.length+1&&[0,3,e].indexOf(l[r+1][u])>=0},function(){return r<W.length+1&&u>0&&[0,3,e].indexOf(l[r+1][u-1])>=0},function(){return u>0&&[0,3,e].indexOf(l[r][u-1])>=0},function(){return r>0&&[0,3,e].indexOf(l[r-1][u])>=0},function(){return r>0&&u<W.length+1&&[0,3,e].indexOf(l[r-1][u+1])>=0}],t=[function(){u++},function(){r++},function(){r++,u--},function(){u--},function(){r--},function(){r--,u++}],o=null,r=null,u=null;if((1==e||2==e)&&(o=0,r=0,u=0),1==e)for(;!n[o]()&&n[(o+1)%6]()?(o=(o+1)%6,t[o](),o=(o+4)%6):o=n[o]()&&!n[(o+1)%6]()||n[o]()&&n[(o+1)%6]()?(o+5)%6:(n[o]()||n[(o+1)%6](),(o+1)%6),0!=l[r][u];);else if(2==e)for(;n[o]()&&!n[(o+1)%6]()?t[o]():o=!n[o]()&&n[(o+1)%6]()||n[o]()&&n[(o+1)%6]()?(o+1)%6:(n[o]()||n[(o+1)%6](),(o+5)%6),0!=l[r][u];);return 1==e&&u>=W.length+1||2==e&&r>=W.length+1}function a(){u()}function g(e,l,n,t){b(e,l,n,t)}function d(e,l,n){w(e,l,n)}function h(e,l){let n={row:null,column:null};return e&&(1=="br".indexOf(e.substr(0,1).toLowerCase())?n.row=W.indexOf(e.substr(1))+1:n.column=W.indexOf(e.substr(1))+1),l&&(1=="br".indexOf(l.substr(0,1).toLowerCase())?n.row=W.indexOf(l.substr(1))+1:n.column=W.indexOf(l.substr(1))+1),n}function f(){let e=h(X,Y);if(null==Y){document.getElementById("playerFlipCardImg").src=document.getElementById(X).src,document.getElementById("playerPlayCardImg").src=D+"/blank.svg";for(let e=0;e<W.length;e++)document.getElementById(X.substr(0,1).toLowerCase()+W[e]).src=D+"/back.svg"}else document.getElementById("playerPlayCardImg").src=document.getElementById(Y).src,s();if(null!=X&&null==Y){if(null!=e.row){le="r"+e.row;for(let l=1;l<=W.length;l++)null==ne[e.row][l]?(d(e.row,l,null),g(e.row,l,"cyan","makeCellMove("+e.row+","+l+",player);")):(document.getElementById("b"+W[l-1]).src=D+"/back.svg",document.getElementById("b"+W[l-1]).onclick="")}else if(null!=e.column){le="b"+e.column;for(let l=1;l<=W.length;l++)null==ne[l][e.column]?(d(l,e.column,null),g(l,e.column,"cyan","makeCellMove("+l+","+e.column+",player);")):(document.getElementById("r"+W[l-1]).src=D+"/back.svg",document.getElementById("r"+W[l-1]).onclick="")}}else if(null!=X&&null!=Y){document.getElementById("playerFlipCardImg").src=D+"/"+_["b,r".split(",").indexOf(X.substr(0,1))]+X.substr(1)+".svg",document.getElementById("playerPlayCardImg").src=D+"/"+_["b,r".split(",").indexOf(Y.substr(0,1))]+Y.substr(1)+".svg";for(let e=1;e<=W.length;e++)if("r"==le.substr(0,1)){if(null==ne[le.substr(1,le.length-1)][e]){let l=le.substr(1,le.length-1);d(l,e,"makeCellMove("+l+","+e+",player);")}}else if("b"==le.substr(0,1)&&null==ne[e][le.substr(1,le.length-1)]){let l=e,n=le.substr(1,le.length-1);d(l,n,"makeCellMove("+l+","+n+",player);")}d(e.row,e.column,null),g(e.row,e.column,"cyan","sendPlayerMove();")}}function p(e,t,o){let r=document.createElementNS(K,"polygon"),u="",c=l(e,t),s=n(e,t);return u+=c+10.243311227557877+","+(s+-5.913978494623655),u+=" ",u+=c+1e-15+","+(s+-11.827956989247312),u+=" ",u+=c+-10.243311227557875+","+(s+-5.91397849462366),u+=" ",u+=c+-10.243311227557879+","+(s+5.913978494623652),u+=" ",u+=c+-2e-15+","+(s+11.827956989247312),u+=" ",u+=c+10.243311227557879+","+(s+5.913978494623652),r.setAttribute("points",u),o&&r.setAttribute("onclick",o),r.style.fill="white",r.style.stroke="black",r}function y(e,t,o,r){let u=document.createElementNS(K,"circle");return u.setAttribute("cx",l(e,t)),u.setAttribute("cy",n(e,t)),u.setAttribute("r",8.279569892473118),u.setAttribute("stroke","black"),u.setAttribute("fill",o),r&&u.setAttribute("onclick",r),u}function b(e,l,n,t){document.getElementById(Q).appendChild(y(e,l,n,t))}function w(e,l,n){document.getElementById(Q).appendChild(p(e,l,n))}function I(){te=null,ne=[],te=[];let e=0,l=null;document.getElementById("playerPlayCardImg").src=D+"/blank.svg",document.getElementById("playerFlipCardImg").src=D+"/blank.svg",document.getElementById("opponentPlayCardImg").src=D+"/blank.svg",document.getElementById("opponentFlipCardImg").src=D+"/blank.svg";for(let l=0;l<=W.length+1;l++){ne.push([]),te.push([]);for(let n=0;n<=W.length+1;n++)0==l&&n==W.length+1||l==W.length+1&&0==n||0==l&&0==n||l==W.length+1&&n==W.length+1?ne[l].push(0):0==l||l==W.length+1?ne[l].push(2):0==n||n==W.length+1?ne[l].push(1):(ne[l].push(null),d(l,n,"makeCellMove("+l+","+n+",player);")),te[l].push(e++)}s(),X=null,Y=null,Z=null,$=null,document.getElementById("loader").classList.add("loaderanimation"),setTimeout((function(){l=B(J,ne),o(l.row,l.column,J),u(),document.getElementById("loader").classList.remove("loaderanimation")}),ue)}function B(e,l){let n=0,t=2,o={},r=[E(k(e,l))[0],E(x(e,l))[0],E(v(e,l))[0]];for(let o=0;o<r.length;o++)if(r[o]){let u=F(e,l,r[o].row,r[o].column);u>n&&(n=u,t=o)}return o={row:r[t].row,column:r[t].column},o}function E(e){let l=[],n=[];for(let l=0;l<e.length;l++)n.push(e[l].weight);for(let t=0;t<e.length;t++){let o={row:e[t].row,column:e[t].column,zscore:(e[t].weight-math.mean(n))/math.std(n)};l.push(o)}return l=l.sort((function(e,l){return l.zscore-e.zscore})),l}function v(e,l){let n=[],t=[null,L(1,l),L(2,l)];if(t[1].length&&t[2].length&&(n=V(e,l,S(t[1]),S(t[2]))),0==n.length){let e={row:7,column:7,weight:1};n.push(e)}return n}function F(e,l,n,t){let o=[],r=0,u=0,c=e%2+1;for(let e=0;e<l.length;e++)o.push(Object.assign([],l[e]));o[n][t]=e;let s=O(o);for(;r<re;){let l=C(o,s,e),m=null,a=null;i(e,l)?m=e:i(c,l)&&(m=c),l[n][t]=c,i(e,l)?a=e:i(c,l)&&(a=c),m!=a&&u++,r++}return u/re}function k(e,l){let n=[],t=O(l),o=[],r=e%2+1;for(let e=0;e<t.length;e++)o.push(0);let u=0;for(;u<re;){let n=C(l,t);for(let l=0;l<t.length;l++){let u=null,c=null;i(e,n)?u=e:i(r,n)&&(u=r),n[t[l][0]][t[l][1]]=n[t[l][0]][t[l][1]]%2+1,i(e,n)?c=e:i(r,n)&&(c=r),u!=c&&o[l]++}u++}for(let e=0;e<t.length;e++){let l={row:t[e][0],column:t[e][1],weight:o[e]};n.push(l)}return n}function O(e){let l=[];for(let n=1;n<=W.length;n++)for(let t=1;t<=W.length;t++)null==e[n][t]&&l.push([n,t]);return l}function C(e,l,n){let t=[],o=(Math.random(),2),r=[];n&&(o=n%2+1);for(let l=0;l<e.length;l++)t.push(Object.assign([],e[l]));r=Object.assign([],l);for(let e=r.length;e>0;e--){let l=Math.floor(Math.random()*e);t[r[l][0]][r[l][1]]=o,r.splice(l,1),o=o%2+1}return t}function x(e,l){let n=[],t=[null,L(1,l),L(2,l)];return t[1].length&&t[2].length&&(n=R(e,l,S(t[1]),S(t[2]))),n}function P(e){let l=[];for(let n=0;n<e.length;n++)for(let t=0;t<e[n].length;t++)l.push(0);return l}function M(e){let l=[];for(let n=0;n<e;n++){l.push([]);for(let t=0;t<e;t++)l[n].push(0)}return l}function L(e,l){let n=[],t=P(l),o=M(t.length);for(let n=0;n<l.length;n++)for(let r=0;r<l[n].length;r++){if(0==n&&0==r)continue;if(n==W.length+1&&r==W.length+1)continue;if(0==n&&2==e)o[te[n][r]][te[n][r]]=1,t[te[n][r]]=oe;else if(0==r&&1==e)o[te[n][r]][te[n][r]]=1,t[te[n][r]]=oe;else if(0==n&&1==e)o[te[n][r]][te[n][r]]=1,t[te[n][r]]=0;else if(0==r&&2==e)o[te[n][r]][te[n][r]]=1,t[te[n][r]]=0;else if(n==l.length-1||r==l[n].length-1)o[e][te[n][r]][te[n][r]]=1,t[te[n][r]]=0;else{let u=0,c=0,s=-1;2==A(n,r,n-1,r,l,e)&&c++,2==A(n,r,n-1,r+1,l,e)&&c++,2==A(n,r,n,r-1,l,e)&&c++,2==A(n,r,n,r+1,l,e)&&c++,2==A(n,r,n+1,r-1,l,e)&&c++,2==A(n,r,n+1,r,l,e)&&c++,2==A(n,r,n-1,r,l,e)&&(o[te[n][r]][te[n-1][r]]=-2/c),2==A(n,r,n-1,r+1,l,e)&&o[te[n][r]][te[n-1][r+1]],2==A(n,r,n,r-1,l,e)&&(o[te[n][r]][te[n][r-1]]=-2/c),2==A(n,r,n,r+1,l,e)&&(o[te[n][r]][te[n][r+1]]=-2/c),2==A(n,r,n+1,r-1,l,e)&&(o[te[n][r]][te[n+1][r-1]]=-2/c),2==A(n,r,n+1,r,l,e)&&(o[te[n][r]][te[n+1][r]]=-2/c),c&&(s=1),[1,3].indexOf(A(n,r,n-1,r,l,e))>-1&&(o[te[n][r]][te[n-1][r]]=s,u++),[1,3].indexOf(A(n,r,n-1,r+1,l,e))>-1&&(o[te[n][r]][te[n-1][r+1]]=s,u++),[1,3].indexOf(A(n,r,n,r-1,l,e))>-1&&(o[te[n][r]][te[n][r-1]]=s,u++),[1,3].indexOf(A(n,r,n,r+1,l,e))>-1&&(o[te[n][r]][te[n][r+1]]=s,u++),[1,3].indexOf(A(n,r,n+1,r-1,l,e))>-1&&(o[te[n][r]][te[n+1][r-1]]=s,u++),[1,3].indexOf(A(n,r,n+1,r,l,e))>-1&&(o[te[n][r]][te[n+1][r]]=s,u++),o[te[n][r]][te[n][r]]=u,t[te[n][r]]=0}}try{let e=numeric.ccsSparse(o);n=numeric.ccsLUPSolve(numeric.ccsLUP(e),t)}catch(e){console.log(e)}return n}function A(e,l,n,t,o,r){return null==o[e][l]&&o[n][t]==r||o[e][l]==r&&null==o[n][t]||null==o[e][l]&&0==o[n][t]||0==o[e][l]&&null==o[n][t]?1:o[e][l]==r&&o[n][t]==r||0==o[e][l]&&o[n][t]==r||o[e][l]==r&&0==o[n][t]?2:null==o[e][l]&&null==o[n][t]?3:0}function S(e){let l=[];for(let n=0;n<e.length;n++){l.push([]);for(let t=0;t<e.length;t++)l[n].push(0)}for(let n=1;n<=W.length;n++)for(let t=1;t<=W.length;t++)l[te[n][t]][te[n-1][t]]=e[te[n][t]]-e[te[n-1][t]],l[te[n][t]][te[n-1][t+1]]=e[te[n][t]]-e[te[n-1][t+1]],l[te[n][t]][te[n][t-1]]=e[te[n][t]]-e[te[n][t-1]],l[te[n][t]][te[n][t+1]]=e[te[n][t]]-e[te[n][t+1]],l[te[n][t]][te[n+1][t-1]]=e[te[n][t]]-e[te[n+1][t-1]],l[te[n][t]][te[n+1][t]]=e[te[n][t]]-e[te[n+1][t]];return l}function j(e,l,n,t){let o=0;return[1,3].indexOf(A(e,l,e-1,l,ne,n))>-1?o+=t[te[e][l]][te[e-1][l]]:[1,3].indexOf(A(e,l,e-1,l+1,ne,n))>-1?o+=t[te[e][l]][te[e-1][l+1]]:[1,3].indexOf(A(e,l,e,l-1,ne,n))>-1?o+=t[te[e][l]][te[e][l-1]]:[1,3].indexOf(A(e,l,e,l+1,ne,n))>-1?o+=t[te[e][l]][te[e][l+1]]:[1,3].indexOf(A(e,l,e+1,l-1,ne,n))>-1?o+=t[te[e][l]][te[e+1][l-1]]:[1,3].indexOf(A(e,l,e+1,l,ne,n))>-1&&(o+=t[te[e][l]][te[e+1][l]]),o}function q(e,l,n,t){let o=!1,r=t%2+1;return 0>=e-1||n.length<=e+1||0>=l-1||n.length<=l+1?o=!1:(!A(e,l,e-1,l,n,t)&&A(e,l,e-1,l,n,r)||!A(e,l,e-1,l+1,n,t)&&A(e,l,e-1,l+1,n,r)||!A(e,l,e,l-1,n,t)&&A(e,l,e,l-1,n,r)||!A(e,l,e,l+1,n,t)&&A(e,l,e,l+1,n,r)||!A(e,l,e+1,l-1,n,t)&&A(e,l,e+1,l-1,n,r)||!A(e,l,e+1,l,n,t)&&A(e,l,e+1,l,n,r))&&(o=!0),o}function T(e,l,n,t){let o=!1,r=t%2+1;return 0>=e-2||n.length<=e+2||0>=l-2||n.length<=l+2?o=!1:(1==A(e,l,e+1,l+1,n,r)&&1==A(e,l,e+1,l,n,r)&&1==A(e,l,e,l+1,n,r)||1==A(e,l,e-1,l-1,n,r)&&1==A(e,l,e-1,l,n,r)&&1==A(e,l,e,l-1,n,r)||1==A(e,l,e-1,l+2,n,r)&&1==A(e,l,e,l+1,n,r)&&1==A(e,l,e-1,l+1,n,r)||1==A(e,l,e+1,l-2,n,r)&&1==A(e,l,e,l-1,n,r)&&1==A(e,l,e+1,l-1,n,r)||1==A(e,l,e+2,l-1,n,r)&&1==A(e,l,e+1,l,n,r)&&1==A(e,l,e+1,l-1,n,r)||1==A(e,l,e-2,l+1,n,r)&&1==A(e,l,e-1,l,n,r)&&1==A(e,l,e-1,l+1,n,r))&&(o=!0),o}function z(e,l,n,t){let o=[];return 0>=e-2||n.length<=e+2||0>=l-2||n.length<=l+2?o=[]:2==A(e,l,e+1,l+1,n,t)&&1==A(e,l,e+1,l,n,t)&&1==A(e,l,e,l+1,n,t)?(o.push({row:e+1,column:l}),o.push({row:e,column:l+1})):2==A(e,l,e-1,l-1,n,t)&&1==A(e,l,e-1,l,n,t)&&1==A(e,l,e,l-1,n,t)?(o.push({row:e-1,column:l}),o.push({row:e,column:l-1})):2==A(e,l,e-1,l+2,n,t)&&1==A(e,l,e,l+1,n,t)&&1==A(e,l,e-1,l+1,n,t)?(o.push({row:e,column:l+1}),o.push({row:e-1,column:l+1})):2==A(e,l,e+1,l-2,n,t)&&1==A(e,l,e,l-1,n,t)&&1==A(e,l,e+1,l-1,n,t)?(o.push({row:e,column:l-1}),o.push({row:e+1,column:l-1})):2==A(e,l,e+2,l-1,n,t)&&1==A(e,l,e+1,l,n,t)&&1==A(e,l,e+1,l-1,n,t)?(o.push({row:e+1,column:l}),o.push({row:e+1,column:l-1})):2==A(e,l,e-2,l+1,n,t)&&1==A(e,l,e-1,l,n,t)&&1==A(e,l,e-1,l+1,n,t)&&(o.push({row:e-1,column:l}),o.push({row:e-1,column:l+1})),o}function N(e,l,n,t){let o=!1;return(T(e,l,n,t)||q(e,l,n,t))&&(o=!0),o}function U(e,l,n,t){let o=e%2+1,r=[];if(!r.length)for(let e=0;e<l.length;e++)for(let u=0;u<l[e].length;u++)if(l[e][u]==o){let c=z(e,u,l,o);if(c.length)for(let e=0;e<c.length;e+=2)null==l[c[e].row][c[e].column]&&null==l[c[e+1].row][c[e+1].column]&&(r.push({playerFactor:n[c[e].row][c[e].column],opponentFactor:t[c[e].row][c[e].column],normPlayerFactor:null,normOpponentFactor:null,weight:null,row:c[e].row+1,column:c[e].column+1}),r.push({playerFactor:n[c[e+1].row][c[e+1].column],opponentFactor:t[c[e+1].row][c[e+1].column],normPlayerFactor:null,normOpponentFactor:null,weight:null,row:c[e+1].row+1,column:c[e+1].column+1}))}for(let o=0;o<l.length;o++)for(let u=0;u<l[o].length;u++)null==l[o][u]&&N(o,u,l,e)&&r.push({playerFactor:n[o][u],opponentFactor:t[o][u],normPlayerFactor:null,normOpponentFactor:null,weight:null,row:o+1,column:u+1});return r}function G(e){let l=e,n=0,t=0,o=0,r=0,u=0,c=0,s=0;for(let e=0;e<l.length;e++)null!=l[e].playerFactor&&(n++,t+=l[e].playerFactor,o=o<l[e].playerFactor?l[e].playerFactor:o),null!=l[e].opponentFactor&&(r++,u+=l[e].opponentFactor,c=c<l[e].opponentFactor?l[e].opponentFactor:c);for(let e=0;e<l.length;e++)null!=l[e].playerFactor&&null!=l[e].opponentFactor&&(l[e].normPlayerFactor=l[e].playerFactor*n/t,l[e].normOpponentFactor=l[e].opponentFactor*r/u,l[e].weight=l[e].normPlayerFactor/l[e].normOpponentFactor,s+=l[e].weight),null==l[e].playerFactor&&(l[e].playerFactor=o),null==l[e].opponentFactor&&(l[e].opponentFactor=c),null==l[e].weight&&(l[e].weight=0);return l.sort((function(e,l){return e.weight-l.weight})),l}function R(e,l,n,t){let o=e%2+1,r=[],u=[],c=[],s=[],m=[],i=[],a=[];for(let m=1;m<=W.length;m++){u.push([]),c.push([]),r.push([]);for(let g=1;g<=W.length;g++)u[m-1].push(null),c[m-1].push(null),r[m-1].push(null),null==l[m][g]?(i.push(j(m,g,e,n)),a.push(j(m,g,o,t)),i[i.length-1]*=i[i.length-1],i[i.length-1]/=6,i[i.length-1]=Math.sqrt(i[i.length-1]),a[a.length-1]*=a[a.length-1],a[a.length-1]/=6,a[a.length-1]=Math.sqrt(a[a.length-1]),u[m-1][g-1]=i[i.length-1]?a[a.length-1]/i[i.length-1]:null,c[m-1][g-1]=a[a.length-1]?i[i.length-1]/a[a.length-1]:null,s.push({playerFactor:u[m-1][g-1],opponentFactor:c[m-1][g-1],normPlayerFactor:null,normOpponentFactor:null,weight:null,row:m,column:g})):r[m-1][g-1]=l[m][g]}return m=G(s),m}function V(e,l,n,t){let o=e%2+1,r=[],u=[],c=[],s=[],m=[];for(let i=1;i<=W.length;i++){u.push([]),c.push([]),r.push([]);for(let a=1;a<=W.length;a++)u[i-1].push(null),c[i-1].push(null),r[i-1].push(null),null==l[i][a]?(s.push(j(i,a,e,n)),m.push(j(i,a,o,t)),s[s.length-1]*=s[s.length-1],s[s.length-1]/=6,s[s.length-1]=Math.sqrt(s[s.length-1]),m[m.length-1]*=m[m.length-1],m[m.length-1]/=6,m[m.length-1]=Math.sqrt(m[m.length-1]),u[i-1][a-1]=s[s.length-1]?m[m.length-1]/s[s.length-1]:null,c[i-1][a-1]=m[m.length-1]?s[s.length-1]/m[m.length-1]:null):r[i-1][a-1]=l[i][a]}return defensiveMoves=G(U(e,r,u,c)),defensiveMoves}let D="./static/cards",H=1,J=H%2+1,K="http://www.w3.org/2000/svg",Q="svgBoard",W=["a","2","3","4","5","6","7","8","9","10","j","q","k"],X=null,Y=null,Z=null,$=null,_="s,d".split(","),ee="c,h".split(","),le=null,ne=[],te=[],oe=100,re=1e3,ue=50;